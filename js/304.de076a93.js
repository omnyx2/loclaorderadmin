"use strict";(globalThis["webpackChunkorder_check"]=globalThis["webpackChunkorder_check"]||[]).push([[304],{1569:(e,t,a)=>{a.d(t,{hi:()=>o});var r=a(3340),n=a(7524);const l="http://18.118.221.107:3001",o=n.Z.create({baseURL:l});(0,r.xr)((({app:e})=>{e.config.globalProperties.$axios=n.Z,e.config.globalProperties.$api=o}))},214:(e,t,a)=>{a.d(t,{N:()=>o});var r=a(3833),n=(a(8126),a(1809)),l=a(1569);const o=(0,n.Q_)("storeInfo",{state:()=>({allStores:r.Z.getItem("allStores")||{},allStories:r.Z.getItem("allStories")||{},allMenuTables:r.Z.getItem("allMenuTables")||{},allMenus:r.Z.getItem("allMenus")||{},allEvents:r.Z.getItem("allEvents")||{},currentStore:r.Z.getItem("currentStore")||{}}),getters:{storeName(e){return e.currentStore.store_title}},actions:{setCurrentStore(e){r.Z.set("currentStore",e),this.currentStore=e},async setAllStores(){var e="store/allStores";await l.hi.get(e).then((e=>{var t=e.data.stores;r.Z.set("allStores",t),this.allStores=t})).catch((e=>{}))},async setAllStories(){var e="brand/allStories";await l.hi.get(e).then((e=>{var t=e.data.stories;r.Z.set("allStories",t),this.allStories=t})).catch((e=>{}))},async setAllMenuTables(){var e="menu/allMenuTables";await l.hi.get(e).then((e=>{var t=e.data.menuTables;r.Z.set("allMenuTables",t),this.allMenuTables=t})).catch((e=>{}))},async setAllMenus(){var e="menu/allMenus";await l.hi.get(e).then((e=>{var t=e.data.menus;r.Z.set("allMenus",t),this.allMenus=t})).catch((e=>{}))},async setAllEvents(){var e="event/allEvents";await l.hi.get(e).then((e=>{var t=e.data.events;r.Z.set("allEvents",t),this.allEvents=t})).catch((e=>{}))}}})},2304:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var r=a(9835),n=a(6970);const l={class:"q-pa-md"},o={class:"q-pa-md"},s={key:0},i={key:1},u={class:"text-subtitle1 text-bold"},d={class:"text-subtitle1 text-bold text-red"};function c(e,t,a,c,p,g){const m=(0,r.up)("q-btn"),w=(0,r.up)("q-th"),h=(0,r.up)("q-tr"),_=(0,r.up)("q-td"),f=(0,r.up)("q-card-section"),v=(0,r.up)("q-card-actions"),b=(0,r.up)("q-card"),S=(0,r.up)("q-table"),k=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(k,null,{default:(0,r.w5)((()=>[(0,r._)("div",l,[(0,r.Wm)(m,{flat:"",size:"md",label:"주문 내역 새로고침",icon:"refresh",onClick:t[0]||(t[0]=t=>e.getOrders())})]),(0,r._)("div",o,[(0,r.Wm)(S,{flat:"",bordered:"",title:"주문 목록",rows:e.retOrders,columns:e.columns,"row-key":"order_id",pagination:e.initialPagination},{header:(0,r.w5)((e=>[(0,r.Wm)(h,{props:e},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.cols,(t=>((0,r.wg)(),(0,r.j4)(w,{key:t.name,props:e},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,r.w5)((t=>[(0,r.Wm)(h,{props:t},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.cols,(a=>((0,r.wg)(),(0,r.j4)(_,{key:a.name,props:t},{default:(0,r.w5)((()=>["order_time"==a.name?((0,r.wg)(),(0,r.iD)("div",s,(0,n.zw)(e.getDateTimeString(a.value)),1)):((0,r.wg)(),(0,r.iD)("div",i,(0,n.zw)(a.value),1))])),_:2},1032,["props"])))),128))])),_:2},1032,["props"]),(0,r.Wm)(h,{props:t},{default:(0,r.w5)((()=>[(0,r.Wm)(_,{colspan:"100%"},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{flat:""},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{class:"text-h6 text-center"},{default:(0,r.w5)((()=>[(0,r.Uk)(" 주문 번호 "+(0,n.zw)(t.row.order_id)+" 상세 설명 ",1)])),_:2},1024),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.ds(t.row.menu_ids),((a,l)=>((0,r.wg)(),(0,r.iD)("div",{key:l,class:"column items-center"},[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("div",u," 메뉴 "+(0,n.zw)(l+1)+": "+(0,n.zw)(e.getMenuInfo(a).menu_title),1),(0,r._)("div",d," 수량: "+(0,n.zw)(e.ds(t.row.menu_numbers)[l])+"개 ",1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.ds(e.getMenuInfo(a).menu_additional_options),((a,o)=>((0,r.wg)(),(0,r.iD)("div",{key:o},(0,n.zw)(a.name)+" : "+(0,n.zw)(a.options[e.ds(t.row.menu_add_options)[l][o]].label),1)))),128))])])),_:2},1024)])))),128)),(0,r.Wm)(v,{align:"center",class:"q-pb-md"},{default:(0,r.w5)((()=>["0"==t.row.is_payed?((0,r.wg)(),(0,r.j4)(m,{key:0,outline:"",class:"text-red",onClick:a=>e.updateOrderToFinsh(t.row.order_id,t.row)},{default:(0,r.w5)((()=>[(0,r.Uk)("송금 완료 처리")])),_:2},1032,["onClick"])):((0,r.wg)(),(0,r.j4)(m,{key:1,outline:"",class:"text-blue",onClick:a=>e.updateOrderToUnfinsh(t.row.order_id,t.row)},{default:(0,r.w5)((()=>[(0,r.Uk)("송금 취소 처리")])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"top-right":(0,r.w5)((()=>[(0,r.Wm)(m,{color:"primary","icon-right":"archive",label:"CSV 다운로드","no-caps":"",onClick:e.exportTable},null,8,["onClick"])])),_:1},8,["rows","columns","pagination"])])])),_:1})}a(9665);var p=a(499),g=a(1569),m=a(1809),w=a(214),h=a(6646);const _=(0,r.aZ)({name:"IndexPage",setup(){const e=(0,w.N)(),{allStores:t,allMenus:a}=(0,m.Jk)(e),n=[{name:"order_id",align:"center",label:"주문 번호",field:"order_id",sortable:!0,sortOrder:"da"},{name:"order_time",align:"center",label:"주문 시각",field:"order_time"},{name:"user_name",align:"center",label:"닉네임",field:"user_name"},{name:"user_phone",align:"center",label:"전화번호",field:"user_phone"},{name:"user_password",align:"center",label:"비밀번호",field:"user_password"},{name:"user_location",align:"center",label:"방 호수",field:"user_location"}];var l=(0,p.iH)([]);function o(){g.hi.get("/order/selectAllOrders").then((e=>{l.value=e.data.orders})).catch((()=>{}))}function s(e){var t=["일","월","화","수","목","금","토"],a=new Date(e),r=a.getFullYear().toString(),n=(a.getMonth()+1).toString(),l=a.getDate().toString(),o=t[a.getDay()],s=a.getHours().toString(),i=a.getMinutes().toString(),u=r+"년 "+n+"월 "+l+"일 ("+o+") "+s.padStart(2,"0")+":"+i.padStart(2,"0");return u}function i(e){if(e)return JSON.parse(e);var t={};return t}function u(e){return t.value[parseInt(e)]}function d(e){return a.value[parseInt(e)]}function c(e,t){var a="order/updateOrderToFinsh/"+e;g.hi.put(a).then((e=>{t.is_payed=1})).catch((e=>{}))}function _(e,t){var a="order/updateOrderToUnfinsh/"+e;g.hi.put(a).then((e=>{t.is_payed=0})).catch((e=>{}))}function f(e,t,a){let r=void 0!==t?t(e,a):e;return r=void 0===r||null===r?"":String(r),r=r.split('"').join('""'),`"${r}"`}function v(e){return l.value.forEach(((t,a)=>{var r="";i(t.menu_ids).forEach(((e,a)=>{r+="메뉴 "+(a+1).toString()+"번: "+d(e).menu_title,r+=" / 수량: "+i(t.menu_numbers)[a]+"개 / ",i(d(e).menu_additional_options).forEach(((e,n)=>{r+=e.name+": "+e.options[i(t.menu_add_options)[a][n]].label+" / "})),r+="  ////  "})),e[a+1]=e[a+1]+","+r})),e}return(0,r.bv)((()=>{o()})),{getOrders:o,retOrders:l,columns:n,initialPagination:{rowsPerPage:0},getDateTimeString:s,ds:i,getStoreInfo:u,getMenuInfo:d,allMenus:a,updateOrderToFinsh:c,updateOrderToUnfinsh:_,exportTable(){var e=[n.map((e=>f(e.label)))];e[0].push("메뉴 상세 정보"),e=e.concat(l.value.map((e=>n.map((t=>f("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format,e))).join(",")))),e=v(e),e=e.join("\r\n");(0,h.Z)("order_list.csv",e,"text/csv")}}}});var f=a(1639),v=a(9885),b=a(4455),S=a(7060),k=a(3532),Z=a(1682),T=a(7220),y=a(4458),M=a(3190),x=a(1821),C=a(9984),I=a.n(C);const D=(0,f.Z)(_,[["render",c]]),O=D;I()(_,"components",{QPage:v.Z,QBtn:b.Z,QTable:S.Z,QTr:k.Z,QTh:Z.Z,QTd:T.Z,QCard:y.Z,QCardSection:M.Z,QCardActions:x.Z})}}]);